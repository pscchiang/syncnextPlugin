`user script`;const buildId="l10RQXqb0xSjQcaU2mps4";const header={'User-Agent':'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/114.0.0.0 Safari/537.36 Edg/114.0.1823.82','Referer':'https://www.histar.tv/','Cookie':'userIP=1.1.1.1'};function buildMedias(inputURL){const postBodyList=inputURL.split("-");const postBody={'page':parseInt(postBodyList[0]),'pageSize':20};if(postBodyList.length>1){postBody.chName=postBodyList[1];if(postBodyList.length>2){postBody.country=postBodyList[2]}}const req={url:'https://aws.ulivetv.net/v3/web/api/filter',method:'POST',body:JSON.stringify(postBody),headers:{'User-Agent':'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/114.0.0.0 Safari/537.36 Edg/114.0.1823.82','Content-Type':'application/json','Referer':'https://www.histar.tv/'}};$http.fetch(req).then(res=>{const items=JSON.parse(res.body).data.list;let datas=[];items.forEach(item=>{const title=item.name;const href="https://www.histar.tv/vod/detail/"+item.id;const coverURLString=item.img;let descriptionText=item.countStr;if(descriptionText==null||descriptionText==""||descriptionText==undefined){descriptionText=item.name}datas.push(buildMediaData(href,coverURLString,title,descriptionText,href))});$next.toMedias(JSON.stringify(datas))})}function Episodes(inputURL){const req={url:inputURL,method:"GET",headers:header};$http.fetch(req).then(res=>{let jsonData=res.body;if(jsonData.indexOf('{"props":')!=-1){jsonData=jsonData.match(/{"props":(.+),"page"/)[1]}const items=JSON.parse(jsonData).pageProps.pageData.videos;let datas=[];items.forEach(item=>{const href=item.purl;const title=item.epInfo;datas.push(buildEpisodeData(href,title,href))});if(datas.length==0){const href="";const title="沒有找到分集數據";datas.push(buildEpisodeData(href,title,href))}$next.toEpisodes(JSON.stringify(datas))})}function Player(inputURL){$next.toPlayer(inputURL)}function Search(inputURL,key){const req={url:"https://www.histar.tv/search?word="+inputURL,method:"GET",headers:header};$http.fetch(req).then(res=>{let jsonData=res.body;if(jsonData.indexOf('{"props":')!=-1){jsonData=jsonData.match(/{"props":(.+),"page"/)[1]}const items=JSON.parse(jsonData).pageProps.initList;let datas=[];items.forEach(item=>{const title=item.name;const href="https://www.histar.tv/vod/detail/"+item.id;const coverURLString=item.picurl;const descriptionText=item.desc;datas.push(buildMediaData(href,coverURLString,title,descriptionText,href))});$next.toSearchMedias(JSON.stringify(datas),key)})}